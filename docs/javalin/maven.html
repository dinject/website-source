<html>
<head>
  <title>DInject Javalin controllers</title>
  <meta name="layout" content="_layout/parent_javalin.html"/>
  <meta name="bread2" content="Maven" href="/docs/javalin/maven"/>
<#assign _maven="active">
</head>
<body>

<h2 id="maven">Getting started with Maven</h2>
<p>
  Add <em>dinject</em> and <em>dinject-controller</em> dependencies.
</p>
<pre content="xml">
<dependency>
  <groupId>io.dinject</groupId>
  <artifactId>dinject</artifactId>
  <version>2.1</version>
</dependency>

<dependency>
  <groupId>io.dinject</groupId>
  <artifactId>dinject-controller</artifactId>
  <version>1.18</version>
</dependency>
</pre>

<h3>Java APT</h3>
<p>
  For Java we add the APT Annotation processors <em>dinject-generator</em> and <em>javalin-generator</em>.
  We typically use <em>provided</em> scope for these APT processors.
</p>
<pre content="xml>
<!-- APT processors -->

<dependency>
  <groupId>io.dinject</groupId>
  <artifactId>dinject-generator</artifactId>
  <version>2.1</version>
  <scope>provided</scope>
</dependency>

<dependency>
  <groupId>io.dinject</groupId>
  <artifactId>javalin-generator</artifactId>
  <version>1.18</version>
  <scope>provided</scope>
</dependency>
</pre>

<h3>Kotlin KAPT</h3>
<p>
  For use with Kotlin we register both <em>javalin-generator</em> and <em>dinject-generator</em>
  as a KAPT processors to the Kotlin compiler.
</p>
<p>
  The easiest way to do this is to add the <code>io.avaje.kapt</code>
  maven tiles for <em>compile, dinject-generator and javalin-generator</em>
  in <em>build / plugins</em> like:
</p>
<pre content="xml>
<build>
  <plugins>

    <plugin>
      <groupId>io.repaint.maven</groupId>
      <artifactId>tiles-maven-plugin</artifactId>
      <version>2.16</version>
      <extensions>true</extensions>
      <configuration>
        <tiles>
          <!-- kotlin compile with kapt support -->
          <tile>io.avaje.kapt:compile:1.1</tile>

          <!-- annotation processor tiles for DI and Javalin controllers -->
          <tile>io.avaje.kapt:dinject-generator:1.1</tile>
          <tile>io.avaje.kapt:javalin-generator:1.1</tile>

          <!-- other annotation processor tiles -->
          <!-- <tile>io.avaje.kapt:querybean-generator:1.1</tile> -->

          <!-- other tiles -->
          <!-- <tile>org.avaje.tile:lib-classpath:1.1</tile> -->
          <!-- <tile>io.ebean.tile:enhancement:12.1.3</tile> -->
        </tiles>
      </configuration>
    </plugin>

  </plugins>
</build>
</pre>
<p>
  With Kotlin KAPT the source code isn't generated automatically on compile (as it is with Java)
  but instead we can specify the source code to be re-generated via:
</p>
<p>
  <em>Maven</em> - <em>Project</em> - <em>Right mouse</em> - <em>Generate Sources and update folders</em>
</p>

<p>
  <img src="/images/maven-generate-source.png" width="600px">
</p>
<p>
  &nbsp;
</p>

<@next "Gradle" "gradle"/>

</body>
</html>
