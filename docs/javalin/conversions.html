<html>
<head>
  <title>DInject Javalin controllers</title>
  <meta name="layout" content="_layout/parent_javalin.html"/>
  <meta name="bread2" content="Type conversions" href="/docs/javalin/conversions"/>
<#assign conversions="active">
</head>
<body>


<h2 id="conversions">Type conversions</h2>
<p>
  There are built in type conversions for the following types:
</p>
<ul>
  <li>int, long, boolean, Integer, Long, Boolean</li>
  <li>BigDecimal, UUID, LocalDate, LocalTime, LocalDateTime</li>
</ul>
<p>
  In the following example there is a type conversion for <em>startDate</em> and <em>active</em>.
</p>

```java
@Get("/:id/:name")
HelloDto hello(int id, String name, LocalDate startDate, Boolean active) {
  ...
}

```
The generated code includes the type conversion with <code>toLocalDate()</code> and <code>toBoolean()</code>.
```java
ApiBuilder.get("/hello/:id/:name", ctx -> {
  ctx.status(200);
  int id = asInt(ctx.pathParam("id"));
  String name = ctx.pathParam("name");
  LocalDate startDate = toLocalDate(ctx.queryParam("startDate"));
  Boolean active = toBoolean(ctx.queryParam("active"));
  ctx.json(controller.hello(id, name, startDate, active));
});
```


<h3>Exception handlers</h3>
<p>
  If a parameter fails type conversion then <code>InvalidPathArgumentException</code> is thrown.
  This exception is typically mapped to a <code>404</code> response in the exception handler.
</p>
<p>
  Note that <code>path</code> conversions imply the value can NOT be null. All other parameter
  types are considered optional/nullable.
</p>
<p>
  <code>InvalidTypeArgumentException</code> is throw for non-path parameter conversions that
  fail such as conversions in form beans, query parameters, headers and cookies.
</p>
<p>
  We should register exception handlers for these 2 exceptions like the handlers below:
</p>

```java
    app.exception(InvalidPathArgumentException.class, (exception, ctx) -> {

      Map<|String, String> map = new LinkedHashMap<>();
      map.put("path", ctx.path());
      map.put("message", "invalid path argument");
      ctx.json(map);
      ctx.status(404);
    });

    app.exception(InvalidTypeArgumentException.class, (exception, ctx) -> {

      Map<|String, String> map = new LinkedHashMap<>();
      map.put("path", ctx.path());
      map.put("message", "invalid type argument");
      ctx.json(map);
      ctx.status(400);
    });



```

<@next "Context" "context"/>

</body>
</html>
