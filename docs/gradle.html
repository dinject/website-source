<html>
<head>
  <title>Maven | DInject dependency injection</title>
  <meta name="layout" content="_layout/docs.html"/>
  <template id="menuNav"><#include "/_layout/_docs_nav_index.ftl"></template>
  <meta name="bread1" content="Gradle" href="/docs/gradle"/>
  <#assign gradle="active">
</head>
<body>

<h2>Gradle</h2>
<p>
  See the example at:
  <a href="https://github.com/dinject/examples/blob/master/javalin-gradle-java-basic/build.gradle">examples/javalin-gradle-java-basic/build.gradle</a>
</p>

<h3>Gradle 5.2+</h3>
<p>
  Use Gradle version 5.2 or greater which has better support for annotation processing.
</p>
<p>
  Also review the IntelliJ IDEA Gradle settings - see below.
</p>

<h3>Dependencies</h3>
<p>
  Add <em>dinject</em> as a compile dependency and <em>dinject-generator</em> as an annotation processor.
</p>

```groovy
dependencies {
  ...
  compile('io.dinject:dinject:1.14')

  annotationProcessor('io.dinject:dinject-generator:1.14')
  ...
}
```

<h3>Kotlin KAPT</h3>
<p>
  See example at: https://github.com/dinject/examples/blob/master/basic-di-kotlin-maven/pom.xml
</p>
<p>
  For use with Kotlin we register <em>dinject-generator</em> as a <code>kapt</code> processor
  to the Kotlin compiler rather than <em>annotationProcessor</em>.
</p>
```groovy
dependencies {
    ...
    kapt('io.dinject:dinject-generator:1.14')
    ...
}
```

<h3 id="idea">IntelliJ IDEA with Gradle</h3>
<p>
  We want to delegate the <code>build</code> to Gradle (to properly include the annotation processing)
  so check our IDEA settings.
</p>

<h4>Settings / Build / Compiler / Annotation processors</h4>
<p>
  Ensure that <code>Enable annotation processing</code> is disabled so
  that the build is delegated to Gradle (including the annotation processing):
</p>

<img src="/images/gradle-idea-disable-apt.png" width="100%">

<h4>Settings / Build / Build tools / Gradle</h4>
<p>
  Make sure <code>Build and run</code> is delegated to Gradle.
</p>
<p>
  Optionally set <em>Run tests using</em> to <code>Gradle</code> but leaving it to IntelliJ IDEA should be ok.
</p>

<img src="/images/gradle-idea-build.png" width="100%">


<@next "Injection" "injection"/>

</body>
</html>
